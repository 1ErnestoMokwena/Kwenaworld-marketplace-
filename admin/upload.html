<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upload Product</title>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <h2>Admin Upload Products</h2>
  <form id="uploadForm">
    <input type="text" id="title" placeholder="Product Title" required><br>
    <input type="number" id="price" placeholder="Price" required><br>
    <textarea id="description" placeholder="Product Description"></textarea><br>
    <input type="file" id="imageFile" accept="image/*" required><br>
    <button type="submit">Upload Product</button>
  </form>

  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      projectId: "YOUR_PROJECT_ID",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const fileInput = document.getElementById('imageFile');
      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64Image = reader.result;

        const product = {
          title: document.getElementById('title').value,
          price: parseFloat(document.getElementById('price').value),
          description: document.getElementById('description').value,
          image: base64Image,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        };

        try {
          await db.collection('products').add(product);
          alert('Product uploaded!');
          document.getElementById('uploadForm').reset();
        } catch (err) {
          alert('Error uploading: ' + err.message);
        }
      };
      reader.readAsDataURL(fileInput.files[0]);
    });
  </script>
</body>
</html>
